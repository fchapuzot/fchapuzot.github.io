
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-73216650-1', 'auto');
ga('set', {
  page: '/documentation/1.3.0/orchestrators/cloudify3_driver/kubernetes.html',
  title: 'Kubernetes (Alpha Version)'
});
ga('send', 'pageview');

</script>

<div class="container-fluid">
  <div class="row">
    
      <div class="col-sm-4 col-md-3">
        <div id="sidebar_menu" class="tree" role="complementary"></div>
      </div>
      <div id="content" class="col-sm-8 col-md-9">
    
        <div style="height: 50px;">
          <h1 class="pull-left" style="margin-top: 0px;">Kubernetes (Alpha Version)</h1>
          <a class="btn btn-primary pull-right" href="http://prose.io/#alien4cloud/alien4cloud.github.io/edit/sources/documentation/1.3.0/orchestrators/cloudify3_driver/kubernetes.markdown"><i class="fa fa-pencil-square-o"></i> Edit (pull request)</a>
        </div>
        <p>This page helps you configure and deploy a hybrid nodecellar application on Kubnernetes through Alien4Cloud/Cloudify.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>A Kubernetes cluster</li>
  <li>A Cloudify Manager running</li>
  <li>The Cloudify manager must have access to Kubernetes REST API.</li>
  <li>The Kubernetes nodes should eventually be able to communication with Cloudify’s agents. In our case, the Nodecellar node deployed on Kubernetes shouls be able to contact its MongoDB database deployed on Openstack through the port 3000.</li>
</ul>

<h2 id="configurations">Configurations</h2>

<p>When <a href="#/documentation/1.3.0/orchestrators/cloudify3_driver/install_config.html">configuring your orchestrator</a>, before enabling it, configure the Kubernetes URL and port.</p>

<p><a href="../../images/cloudify3_driver/k8s_orchestrator_config.png" title="Kubernetes orchestrator configuration"><img src="../../images/cloudify3_driver/k8s_orchestrator_config.png" alt="Kubernetes orchestrator configuration" title="Kubernetes orchestrator configuration" /></a></p>

<h2 id="upload-tosca-components">Upload TOSCA Components</h2>

<p>In order to build our hybrid nodecellar topology, you will need to import some TOSCA components.
Follow the <a href="#/documentation/1.3.0/user_guide/catalog_type_upload.html">import from Git location</a> instructions to import the <a href="https://github.com/alien4cloud/docker-tosca-types">docker-tosca-types</a> into Alien4Cloud.</p>

<p>Once uploaded, your Alien4Cloud will contains additional types:</p>

<ul>
  <li>docker-types</li>
  <li>nodecellar-docker-types (with the 2 node types <code>alien.nodes.Application.Docker.Nodecellar</code> and <code>alien.nodes.Application.Docker.Mongo</code>)</li>
  <li>and 2 topology templates: <code>NodecellarDocker</code> and <code>NodecellarDockerHybrid</code></li>
</ul>

<div class="note warning">
<p>Node that the <code>NodecellarDocker</code> won’t deploy right now since the Kubernetes plugin do not yet support volumes.
But you can modify the topology by removing the 2 volumes and deploy the 2 containers.</p>
</div>

<h2 id="deploy-the-hybrid-topology">Deploy the Hybrid Topology</h2>

<p>Create a <a href="#/documentation/1.3.0/user_guide/application_management.html">new application</a> using the <code>NodecellarDockerHybrid</code> topology template.</p>

<p><a href="../../images/cloudify3_driver/k8s_create_application.png" title="Kubernetes create application"><img src="../../images/cloudify3_driver/k8s_create_application.png" alt="Kubernetes create application" title="Kubernetes create application" /></a></p>

<p>Finally, you just have to clic the <code>deploy</code> button and wait for the deployment to complete.</p>

<p><a href="../../images/cloudify3_driver/k8s_deployed.png" title="Kubernetes deployed application"><img src="../../images/cloudify3_driver/k8s_deployed.png" alt="Kubernetes deployed application" title="Kubernetes deployed application" /></a></p>

<p>And if you have access to the Kubernetes webui, you can check that you have a nodecellar deployed on it</p>

<p><a href="../../images/cloudify3_driver/k8s_ui.png" title="Kubernetes UI"><img src="../../images/cloudify3_driver/k8s_ui.png" alt="Kubernetes UI" title="Kubernetes UI" /></a></p>


        <a class="btn btn-primary pull-right" href="http://prose.io/#alien4cloud/alien4cloud.github.io/edit/sources/documentation/1.3.0/orchestrators/cloudify3_driver/kubernetes.markdown"><i class="fa fa-pencil-square-o"></i> Edit (pull request)</a>
	  </div>
    </div>
  </div>
</div><!-- /container -->

<script>
var hash = location.hash.replace( /^#/, '' );
if(hash && hash!== null && hash.match(/html$/)) {
} else {
  var newLocation = location.protocol+"//"+location.host+"#"+location.pathname;
  location.replace(newLocation);
}
</script>
<script type="text/javascript" src="/js/post-layout.js"></script>
<script>
$(document).ready(function () {
  makeSideBar('DOCUMENTATION-1.3.0', 'documentation/1.3.0/orchestrators/cloudify3_driver/kubernetes.markdown');
});
</script>

<script>
$("div[data-gist]").gist();
</script>
